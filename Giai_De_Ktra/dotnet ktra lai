using System;
using System.Collections.Generic;
using System.Text;

namespace _06062022_C1_ViHoangGiang_2020604146_De03
{
    public class SinhVien
    {
        public string MaSV { get; set; }
        public string hovaten { get; set; }
        public float python { get; set; }
        public float java { get; set; }

        public SinhVien()
        {

        }
        public SinhVien(string MaSV, string hovaten,float python,float java)
        {
            this.MaSV = MaSV;
            this.hovaten = hovaten;
            this.python = python;
            this.java = java;
        }
        public virtual void Nhap()
        {
            Console.Write($"Nhap ma sinh vien: ");
            MaSV = Console.ReadLine();
            Console.Write($"Nhap ho va ten   : ");
            hovaten = Console.ReadLine();
            Console.Write($"Nhap diem python: ");
            python = float.Parse(Console.ReadLine());
            Console.Write($"Nhap diem java  : ");
            java = float.Parse(Console.ReadLine());

        }
        public virtual float TongDiem()
        {
            return python + java;
        }
        
    }
    public class SinhVienDT : SinhVien
    {
        public float english { get; set; }
        public float uutien { get; set; }

        public override void Nhap()
        {
            base.Nhap();
            Console.Write($"Nhap diem tieng anh: ");
            english = float.Parse(Console.ReadLine());
            Console.Write($"Nhap diem uu tien   : ");
            uutien = float.Parse(Console.ReadLine());
        }
        public virtual float Input()
        {
            float e = 0;
            if(english>8)
            {
                uutien = 2;
            }
            else if(5<=english ||english<=8)
            {
                uutien = 1;
            }
            else if(english <5)
            {
                uutien = 0;
            }
            return e;
            
        }
        public virtual void Output()
        {
            Console.WriteLine($"{MaSV,20}{hovaten,20}{python,20}{java,20},{english,20}{uutien,20}");

        }

        public  override float TongDiem()
        {
            return python + java + english + uutien;
        }
        public virtual string XetTuyen()
        {
           float mark = 0;
            if (mark <= TongDiem())
            {
                Console.WriteLine($"Duoc Chon");

            }
            else
            {
                Console.WriteLine($"Loai");
            }
            return XetTuyen();
            
        }
            

    }
    class Program
    {
        static List<SinhVienDT> sinhVienDts = new List<SinhVienDT>();
        static void Main(string[] args)
        {
            Console.OutputEncoding = Encoding.Unicode;
            Console.InputEncoding = Encoding.Unicode;
            int choose;

            do
            {
                Console.WriteLine($"-------------------Menu--------------------");
                Console.WriteLine($"1. Thêm");
                Console.WriteLine($"2. Hiển thị danh sách");
                Console.WriteLine($"3. Nhập điểm");
                Console.WriteLine($"4. Thoát");

                Console.WriteLine($"Nhập lựa chọn: ");
                choose = int.Parse(Console.ReadLine());

                switch (choose)
                {
                    case 1:
                        AddSinhVien();
                        break;
                    case 2:
                        Show();
                        break;
                    case 3:
                        Sort();
                        break;
                    case 4:
                        Console.WriteLine($"Kết thúc");
                        break;
                    default:
                        Console.WriteLine($"Không có lựa chọn này");
                        break;
                }
            } while (choose != 4);
        }
        public static void AddSinhVien()
        {
            try
            {
                SinhVienDT sinhviendt = new SinhVienDT();
                sinhviendt.Nhap();
                if(IsDupicate(sinhviendt))
                {
                    Console.WriteLine($"Trung ma sinh vien");
                    return;
                }
                sinhVienDts.Add(sinhviendt);
            }catch(Exception e)
            {
                Console.WriteLine($"Loi nhap du lieu");
            }
        }

        private static bool IsDupicate(SinhVienDT sinhviendt)
        {
            foreach (var item in sinhVienDts)
            {
                if (item.MaSV == sinhviendt.MaSV)
                {
                    return true;
                }
            }
            return false;
        }
        public static void Show()
        {
            Console.WriteLine($"{"Ma sinh vien",20}{"Ho va ten",20}{"python",20}{"java",20},{"english",20}{"diem uu tien",20}");
            {
                for (int i = 0; i < sinhVienDts.Count - 1; i++)
                {
                    for (int j = sinhVienDts.Count - 1; j > i; j--)
                    {
                        if (sinhVienDts[j - 1].TongDiem() > sinhVienDts[j].TongDiem())
                        {
                            SinhVienDT temp = sinhVienDts[j - 1];
                            sinhVienDts[j - 1] = sinhVienDts[j];
                            sinhVienDts[j] = temp;
                        }
                    }
                }
            }
            foreach (var item in sinhVienDts)
            {
                Console.WriteLine($"{item.MaSV,20}{item.hovaten,20}{item.python,20}{item.java,20},{item.english,20}{item.uutien,20}");
            }
        }       
    }
}
